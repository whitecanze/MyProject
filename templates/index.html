<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="http://www.rbac.ac.th/freshman/wp-content/uploads/2019/01/cropped-rbac-01-270x270.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/ddbad6351c.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Mono&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Kanit&display=swap" rel="stylesheet">

    <!-- css and script -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pagestyle.css') }}">
    <title>ระบบจัดการ</title>
</head>

<body>
    <div id="wrapper" class="menuDisplayed" style="overflow:hidden;">
        <!-- Sidebar -->
        <div id="sidebar-wrapper" style="overflow:hidden;">
            <div class="sidebar-header w3-animate-opacity">
                <div class="" align="center">
                    <h1 style="font-weight: bold;color:rgba(253, 184, 19, 1);">{{sendtextpage['sidebartexthead']}}</h1>
                    <h6 id="clock" style="font-size: 1rem;">
                        <p class=" spinner-grow spinner-grow-sm text-warning"></p>
                    </h6>
                </div>
                <hr style="border-color: rgba(253, 184, 19, 1);">
            </div>
            <div class="sidebar-body w3-animate-opacity">
                <ul class="sidebar-nav ">
                    <li><a href="" style="" class="navbar-toggler" data-toggle="collapse"
                            data-target="#collapsibleNavbar" aria-expanded="false"
                            onclick="toggleChevron(this)">{{sendtextpage['sidebartextbody1']}}
                            <i class="fas fa-caret-down"></i></a>
                        <div class="collapse navbar-collapse " id="collapsibleNavbar">
                            <ul class="navbar-nav" style="background-color: rgba(0, 0, 64, 1);border-radius: 0px 30px;border-left:solid
                                5px rgba(253, 184, 19, 1);border-right:solid 2px rgba(253, 184, 19, 1)">
                                <li class="nav-item add1">
                                    <a href="" data-toggle="modal" style="font-size: 1.25rem;"
                                        data-target="#modalcreate">{{sendtextpage['sidebartextsubbody1']}}</a>
                                </li>
                                <li class="nav-item add2">
                                    <a class="nav-link" href="" data-toggle="modal" style="font-size: 1.25rem;"
                                        data-target="#modaladdsj">{{sendtextpage['sidebartextsubbody2']}}</a>
                                </li>
                                <li class="nav-item add3">
                                    <a class="nav-link disabled" href="" data-toggle="modal" style="font-size: 1.25rem;"
                                        data-target="#modaladdimage">{{sendtextpage['sidebartextsubbody3']}}</a>
                                </li>
                                <li class="nav-item add3">
                                    <a class="nav-link disabled" href=""
                                        style="font-size: 1.25rem;">{{sendtextpage['sidebartextsubbody4']}}</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="/training">{{sendtextpage['sidebartextbody2']}}</a></li>
                    <li><a href="/detection">{{sendtextpage['sidebartextbody3']}}</a></li>
                    <li><a href="/count">{{sendtextpage['sidebartextbody4']}}</a></li>
                </ul>
            </div>
            <div class="sidebar-footer w3-animate-opacity">
                <hr style="border-color: rgba(253, 184, 19, 1);">
                <div class="container"></div>
            </div>
        </div>
        <!-- body content -->
        <div id="page-content-wrapper" style="overflow:auto;">
            <!-- top logo  -->
            <div class="container w3-animate-opacity" align="center">
                <img src="http://www.rbac.ac.th/freshman/wp-content/uploads/2019/01/rbac-01.png" alt="">
                <hr style="border-color:rgba(253, 184, 19, 1);border-width: 3px;">
            </div>
            <!-- sub content -->
            <div class="container-fluid" style="margin-top:1%;">
                <div class="card-columns w3-animate-opacity">
                    <div class="card main-1">
                        <div class="card-header text-center">
                            <h1 class="card-text" style="">จำนวนนักเรียนทั้งหมดในระบบ</h1>
                        </div>
                        <div class="card-body text-center">
                            <h1 class="card-text">จำนวน: {{countst}} คน</h1>
                        </div>
                    </div>
                    <div class="card main-2">
                        <div class="card-header text-center">
                            <h1 class="card-text">จำนวนคณะทั้งหมดในระบบ</h1>
                        </div>
                        <div class="card-body text-center">
                            <h1 class="card-text">จำนวน: {{countfac}} คณะ</h1>
                        </div>
                    </div>
                    <div class="card main-3">
                        <div class="card-header text-center">
                            <h1 class="card-text">จำนวนวิชาทั้งหมดในระบบ</h1>
                        </div>
                        <div class="card-body text-center">
                            <h1 class="card-text">จำนวน: {{countsj}} วิชา</h1>
                        </div>
                    </div>
                </div>
                <hr style="border-color: rgba(253, 184, 19, 1);border-width: 10px;">
            </div>
            <!-- navigation bar -->
            <nav class="navbar navbar-expand-sm sticky-top justify-content-center"
                style="background-color:rgba(31, 31, 64, 1);">
                <div class="w3-animate-opacity">
                    <h1 style="text-transform:uppercase;font-weight:bold;margin-top:2.5%;">dashboard</h1>
                </div>
                <!-- <form class="form-inline w3-animate-opacity">
                    <div class="input-group mb-3" style="margin-top: 5%;">
                        <input type="search" class="form-control" placeholder="Search... Ex.59010001"
                            aria-label="Search" aria-describedby="Search">
                        <div class="input-group-append">
                            <button class="btn btn-outline-warning" type="submit"><i class="fas fa-search"></i></button>
                        </div>
                    </div>
                </form> -->
            </nav>
            <!-- alert -->
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category,message in messages %}
            <div class="alert alert-{{category}} alert-dismissible fade show" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}
            <!-- form add student -->
            <div id="modalcreate" class="modal fade" role="dialog" align="start">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header"
                            style="background-color: rgba(0, 0, 64, 1);color:rgba(253, 184, 19, 1)" ;>
                            <h4 class="modal-title">แบบฟอร์มบันทึกข้อมูล</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form action="/create" method="POST">
                                <div class="form-group">
                                    <label>รหัสนิสิต:</label>
                                    <input type="hidden" name="st_status" value="none">
                                    <input type="number" class="form-control" name="st_id" value="" require>
                                </div>
                                <div class="form-group">
                                    <label>ชื่อ:</label>
                                    <input type="text" class="form-control" name="fname" value="" require>
                                </div>
                                <div class="form-group">
                                    <label>นามสกุล:</label>
                                    <input type="text" class="form-control" name="lname" value="" require>
                                </div>
                                <div class="form-group">
                                    <label for="sel1">คณะ:</label>
                                    <select class="form-control" id="sel1" name="faculty">
                                        {% for getfac in shfaculty%}
                                        <option>{{getfac['fac_name']}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="sel1">สาขาวิชา:</label>
                                    <select class="form-control" id="sel1" name="branch">
                                        {% for getbr in shbranch %}
                                        <option>{{getbr['br_name']}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="sel1">ชั้นปี:</label>
                                    <select class="form-control" id="sel1" name="stlevel">
                                        <option>4</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="sel1">ระดับความแม่นยำ:</label>
                                    <input type="hidden" name="level" value="1">
                                    <select class="form-control" id="sel1" name="level" disabled>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="dif"
                                        style="color:gray;">*ระดับความแม่นยำยิ่งสูงยิ่งเก็บจำนวนข้อมูลมาก</label><br>
                                    <button class="btn btn-outline-warning btn-lg" type="submit">ส่ง</button>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-danger" data-dismiss="modal">ปิด</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- main content -->
            <div class="main-content" style="margin-top: 1%;overflow:hidden;">
                <div class="row">
                    <!-- table student -->
                    <div class="col-8" style="width: 100%;">
                        <div class="w3-container w3-animate-opacity">
                            <div class="card">
                                <div class="card-header"
                                    style="text-align:center;background-color:rgba(31, 31, 64, 1);border-bottom:solid 1px rgba(253, 184, 19, 1);">
                                    <h1 style="color:rgba(253, 184, 19, 1);">รายชื่อนักเรียน</h1>
                                </div>
                                <div class="card-body" style="padding: 0;">
                                    <table class="table" style="text-align: center;">
                                        <thead>
                                            <tr
                                                style="background-color:rgba(31, 31, 64, 1);color:rgba(253, 184, 19, 1);font-weight:bold;">
                                                <th>คณะ</th>
                                                <th>สาขา</th>
                                                <th>รหัสนิสิต</th>
                                                <th>ชื่อ</th>
                                                <th>นามสกุล</th>
                                                <th>เช็คชื่อ</th>
                                                <th>จัดการ</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for data in datas %}
                                            <tr class="">
                                                <td>{{data["fac_name"]}}</td>
                                                <td>{{data["br_name"]}}</td>
                                                <td>{{data["st_id"]}}</td>
                                                <td>{{data["f_name"]}}</td>
                                                <td>{{data["l_name"]}}</td>
                                                <td data-toggle="tooltip1" title="{{data["last_check"]}}">
                                                    {{data["st_status"]}}</td>
                                                <td>
                                                    <div class="btn-group">
                                                        <div class="row">
                                                            <div class="col-4">
                                                                <a href="" id="informationtag" data-toggle="modal"
                                                                    data-target="#modaladdimage{{data['st_id']}}">
                                                                    <i class="fas fa-camera-retro"
                                                                        style="font-size:1.5rem;" data-toggle="tooltip1"
                                                                        title="เพิ่มรูปภาพ"></i>
                                                            </div>
                                                            <div class="col-4">
                                                                <a href="" id="informationtag" data-toggle="modal"
                                                                    data-target="#modalsjtable{{data['st_id']}}">
                                                                    <i class="fas fa-info-circle"
                                                                        style="font-size:1.5rem;" data-toggle="tooltip1"
                                                                        title="แสดงรายวิชาที่ลงทะเบียน"></i></a>
                                                            </div>
                                                            <div class="col-4">
                                                                <a href="" id="gear1" data-toggle="modal"
                                                                    data-target="#modaleditstd{{data['st_id']}}">
                                                                    <i class="fas fa-cog" style="font-size:1.5rem;"
                                                                        data-toggle="tooltip1"
                                                                        title="แก้ไขจัดการข้อมูลนักเรียน"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <div id="modaladdimage{{data['st_id']}}" class="modal fade" role="dialog"
                                                align="start">
                                                <div class="modal-dialog modal-lg">
                                                    <div class="modal-content">
                                                        <div class="modal-header"
                                                            style="background-color: rgba(0, 0, 64, 1);color:rgba(253, 184, 19, 1)"
                                                            ;>
                                                            <h4 class="modal-title">เพิ่มรูปภาพ :: {{data['st_id']}}
                                                            </h4>
                                                            <button type="button" class="close"
                                                                data-dismiss="modal">&times;</button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <form action="/upload-image" method="POST"
                                                                enctype="multipart/form-data">
                                                                <div class="form-group">
                                                                    <label>เลือกรูปภาพ</label>
                                                                    <input type="hidden" name="imgname"
                                                                        value="Student.{{data['st_id']}}.1.jpg">
                                                                    <input type="hidden" name="st_id"
                                                                        value="{{data['st_id']}}">
                                                                    <div class="custom-file">
                                                                        <input type="file" class="custom-file-input"
                                                                            name="image" id="image">
                                                                        <label class="custom-file-label"
                                                                            for="image">เลือกรูปภาพ...</label>
                                                                    </div>
                                                                </div>
                                                                <button type="submit"
                                                                    class="btn btn-primary">Upload</button>
                                                            </form>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-outline-danger"
                                                                data-dismiss="modal">ปิด</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="modaleditstd{{data["st_id"]}}" class="modal fade" role="dialog">
                                                <div class="modal-dialog modal-xl">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">แบบฟอร์มจัดการข้อมูล</h4>
                                                            <button type="button" class="close"
                                                                data-dismiss="modal">&times;</button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <form action="/updatestd" method="POST">
                                                                <div class="form-group">
                                                                    <label>รหัสนิสิต:{{data["st_id"]}}</label>
                                                                    <input type="hidden" class="form-control"
                                                                        name="st_id" value="{{data["st_id"]}}">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>ชื่อ:</label>
                                                                    <input type="text" class="form-control" name="fname"
                                                                        value="{{data["f_name"]}}">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>นามสกุล:</label>
                                                                    <input type="text" class="form-control" name="lname"
                                                                        value="{{data["l_name"]}}">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>สถานะ:</label>
                                                                    <select class="form-control" id="sel1"
                                                                        name="st_status" require>
                                                                        {% if data["st_status"] == "none" %}
                                                                        <option selected hidden>{{data["st_status"]}}
                                                                        </option>
                                                                        <option>Checked</option>
                                                                        {% else %}
                                                                        <option selected hidden>{{data["st_status"]}}
                                                                        </option>
                                                                        <option>none</option>
                                                                        {% endif %}
                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <button class="btn btn-primary btn-lg"
                                                                        type="submit">แก้ไข</button>
                                                                </div>
                                                            </form>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <form action="/deletestd" method="POST">
                                                                <input type="hidden" class="form-control" name="st_id"
                                                                    value="{{data["st_id"]}}">
                                                                <button type="submit"
                                                                    class="btn btn-outline-danger btn-lg"
                                                                    onclick="return confirm('คุณต้องการลบข้อมูลหรือไม่?')">ลบข้อมูล</button>
                                                            </form>
                                                            <button type="button"
                                                                class="btn btn-outline-secondary btn-lg"
                                                                data-dismiss="modal">ปิด</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {% with getenroll = data['enroll'] %}
                                            {% with getsjenroll = getenroll['sj_enroll'] %}
                                            {% with getsjlist = getsjenroll['sj_list'] %}
                                            {% with bgColor = ['primary','success','info','warning','danger','secondary','dark'] %}
                                            <div id="modalsjtable{{data["st_id"]}}" class="modal fade" role="dialog"
                                                style="user-select: none;font-weight:bold;">
                                                <div class="modal-dialog modal-dialog-scrollable modal-xl">
                                                    <div class="modal-content"
                                                        style="background-color: rgba(31, 31, 31, 1);color:white;">
                                                        <div class="modal-header w3-animate-top">
                                                            <h2 class="modal-title">ตารางวิชา</h2>
                                                            <button type="button" class="close"
                                                                data-dismiss="modal">&times;</button>
                                                        </div>
                                                        <div class="modal-body w3-animate-opacity">
                                                            <br>
                                                            <div class="container">
                                                                <div class="row">
                                                                    <div class="col-10">
                                                                        <h3>รหัสนิสิต : {{data["st_id"]}}</h3>
                                                                        <h3>ชื่อ : {{data['f_name']}} {{data['l_name']}}
                                                                        </h3>
                                                                    </div>
                                                                    <div class="col-2">
                                                                        <div class="btn-group-vertical">
                                                                            <center>
                                                                                <form action="/addsj" method="POST">
                                                                                    <input type="hidden" name="st_id"
                                                                                        value="{{data["st_id"]}}">
                                                                                    <input type="hidden" name="st_fname"
                                                                                        value="{{data["f_name"]}}">
                                                                                    <input type="hidden" name="st_lname"
                                                                                        value="{{data["l_name"]}}">
                                                                                    <input type="hidden" name="fac_name"
                                                                                        value="{{data["fac_name"]}}">
                                                                                    <input type="hidden" name="level"
                                                                                        value="{{data["st_level"]}}">
                                                                                    <input type="hidden" name="branch"
                                                                                        value="{{data["br_name"]}}">
                                                                                    <button type="submit"
                                                                                        class="btn btn-outline-success">
                                                                                        <i class="fas fa-plus"></i>
                                                                                        &nbsp;&nbsp;
                                                                                        เพิ่มวิชาเรียน</button>
                                                                                </form>
                                                                            </center>
                                                                            <center>
                                                                                <a class="btn btn-outline-warning btn-xs"
                                                                                    href="">
                                                                                    ตารางสรุปทั้งหมด
                                                                                </a>
                                                                            </center>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <br>
                                                            {% for i in getsjlist %}
                                                            {% with num = loop.index %}
                                                            {% with txtlist = 'sj_{}'.format(num) %}
                                                            {% with getsj = getsjlist[txtlist] %}
                                                            {% if getsj['sj_id'] != '-' %}
                                                            <div class="container">
                                                                <div id="accordion">
                                                                    <div class="card bg-{{bgColor[num-1]}} text-white"
                                                                        data-toggle="collapse" href="#collapse{{num}}">
                                                                        <div class="card-header">
                                                                            <a style="text-align:start;">
                                                                                วิชา {{getsj['sj_id']}} ::
                                                                                {{getsj['sj_name']}}
                                                                            </a>
                                                                        </div>
                                                                        <div id="collapse{{num}}" class="collapse"
                                                                            data-parent="#accordion">
                                                                            <div class="row">
                                                                                <div class="col-10"
                                                                                    style="background-color: rgba(31,31,31, 0.5);">
                                                                                    <div class="card-body text-white"
                                                                                        style="background-color: rgba(31,31,31, 0.5);width:100%;height:100%;">
                                                                                        <h3
                                                                                            style="text-align: center;font-weight:bold;">
                                                                                            รายละเอียดเพิ่มเติมเกี่ยวกับวิชา
                                                                                        </h3>
                                                                                        <hr>
                                                                                        <div class="row" style="">
                                                                                            <div class="col">
                                                                                                <p>รหัสวิชา :
                                                                                                    {{getsj['sj_id']}}
                                                                                                </p>
                                                                                                <p>ชื่อวิชา :
                                                                                                    {{getsj['sj_name']}}
                                                                                                </p>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <p>เข้าเรียนล่าสุดวันที่
                                                                                                    :
                                                                                                    none
                                                                                                </p>
                                                                                                <p>เวลา : none </p>
                                                                                            </div>
                                                                                            <div class="w-100"></div>
                                                                                            <div class="col">
                                                                                                {% with datedic = {'Mon':'วันจันทร์','Tue':'วันอังคาร','Wed':'วันพุธ','Thu':'วันพฤหัสบดี','Fri':'วันศุกร์','Sat':'วันเสาร์','Sun':'วันอาทิตย์'}  %}
                                                                                                {% for k,v in datedic.items()  %}
                                                                                                {% if getsj['sj_date'] == k %}
                                                                                                <p>วันที่ : {{v}}</p>
                                                                                                {% endif %}
                                                                                                {% endfor %}
                                                                                                {% endwith %}
                                                                                                <p>เวลา
                                                                                                    :{{getsj['sj_begin']}}
                                                                                                    ถึง
                                                                                                    {{getsj['sj_finish']}}
                                                                                                </p>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <p>สาย :
                                                                                                    {{data['late']}}
                                                                                                    ครั้ง
                                                                                                </p>
                                                                                                <p>ขาดเรียน :
                                                                                                    {{data['absent']}}
                                                                                                    ครั้ง
                                                                                                </p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-2"
                                                                                    style="background-color: rgba(31,31,31, 0.5);">
                                                                                    <div class="card-body text-white"
                                                                                        style="background-color: rgba(31,31,31, 0.5);width:100%;height:100%;">
                                                                                        <div class="row">
                                                                                            <a class="btn btn-{{bgColor[num-1]}} btn-xs"
                                                                                                style="margin-top:30px;color:white;font-weight:bold;"
                                                                                                href="/stsjconclusion/{{data['st_id']}}/{{getsj['sj_id']}}">ตารางสรุปผลการเข้าเรียน</a>
                                                                                        </div>
                                                                                        <div class="row">
                                                                                            <form action="/deletestsj"
                                                                                                method="POST">
                                                                                                <input type="hidden"
                                                                                                    class="form-control"
                                                                                                    name="stid"
                                                                                                    value="{{data['st_id']}}">
                                                                                                <input type="hidden"
                                                                                                    class="form-control"
                                                                                                    name="sjid"
                                                                                                    value="{{getsj['sj_id']}}">
                                                                                                <button type="submit"
                                                                                                    class="btn btn-outline-danger btn-lg"
                                                                                                    style="margin-top:30px;color:white;font-weight:bold;width:100%;"
                                                                                                    onclick="return confirm('คุณต้องการลบวิชานี้หรือไม่?')">ลบวิชาเรียน</button>
                                                                                            </form>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            {% endif %}
                                                            {% endwith %}
                                                            {% endwith %}
                                                            {% endwith %}
                                                            {% endfor %}
                                                            <br>
                                                        </div>
                                                        <div class="modal-footer w3-animate-bottom">
                                                            <button type="button" class="btn btn-outline-secondary"
                                                                data-dismiss="modal">ปิด</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {% endwith %}
                                            {% endwith %}
                                            {% endwith %}
                                            {% endwith %}
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- subject list -->
                    <div class="col-4 " style="padding: 0%;">
                        <div class="card w3-animate-opacity" style="width:95%;height:340px;">
                            <nav class="navbar navbar-expand-sm sticky-top justify-content-center"
                                style="background-color:rgba(31, 31, 64, 1);">
                                <h1 style="color:rgba(253, 184, 19, 1);">รายชื่อวิชาในระบบ </h1>
                            </nav>
                            <!-- <div class="card-header" style="text-align:center;background-color:rgba(31, 31, 64, 1);">
                                <h1 style="color:rgba(253, 184, 19, 1);">รายชื่อวิชาในระบบ </h1>
                            </div> -->
                            <ul class="list-group" style="overflow:auto;">
                                <!-- {% for x in range(18) %}
                                <li class="list-group-item"
                                    style="color:rgba(31, 31, 64, 1);font-weight: bold;font-size:1.2rem;">
                                    <div class="row">
                                        <div class="col-11" data-toggle="tooltip1" title="{{x}}">
                                            {{x}} :
                                            {{x}}
                                        </div>
                                        <div class="col-1">
                                            <a href="" id="gear1" data-toggle="modal"
                                                data-target="#modaleditsj{{x}}"><i class="fas fa-cog"
                                                    style="font-size:1.5rem;" data-toggle="tooltip1"
                                                    title="แก้ไขจัดการข้อมูลวิชา"></i></a>
                                        </div>
                                    </div>
                                </li>
                                {% endfor %} -->
                                {% with getshsj = shsj %}
                                {% for data in getshsj %}
                                {% with getsjdetail = data['sj_detail'] %}
                                <li class="list-group-item"
                                    style="color:rgba(31, 31, 64, 1);font-weight: bold;font-size:1.2rem;">
                                    <div class="row">
                                        <div class="col-11" data-toggle="tooltip1" title="{{data['fac_name']}}">
                                            {{data['sj_id']}} :
                                            {{getsjdetail['sj_name']}}
                                        </div>
                                        <div class="col-1">
                                            <a href="" id="gear1" data-toggle="modal"
                                                data-target="#modaleditsj{{data['sj_id']}}"><i class="fas fa-cog"
                                                    style="font-size:1.5rem;" data-toggle="tooltip1"
                                                    title="แก้ไขจัดการข้อมูลวิชา"></i></a>
                                        </div>
                                    </div>
                                </li>
                                <div id="modaladdsj" class="modal fade" role="dialog" align="start">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content">
                                            <div class="modal-header"
                                                style="background-color: rgba(0, 0, 64, 1);color:rgba(253, 184, 19, 1)"
                                                ;>
                                                <h4 class="modal-title">แบบฟอร์มเพิ่มรายวิชา</h4>
                                                <button type="button" class="close"
                                                    data-dismiss="modal">&times;</button>
                                            </div>
                                            <div class="modal-body">
                                                <form action="/addnewsj" method="POST">
                                                    <div class="form-group">
                                                        <label for="sel1">คณะ:</label>
                                                        <select class="form-control" id="sel1" name="faculty">
                                                            {% for getfac in shfaculty2%}
                                                            <option>{{getfac['fac_name']}}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>รหัสวิชา:</label>
                                                        <input type="text" class="form-control" name="sj_id" value=""
                                                            maxlength="6" style="text-transform:uppercase" require>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>ชื่อวิชา:</label>
                                                        <input type="text" class="form-control" name="sj_name" value=""
                                                            require>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="sel2">วันที่:</label>
                                                        <select class="form-control" id="sel2" name="day">
                                                            {% with days = ['วันจันทร์','วันอังคาร','วันพุธ','วันพฤหัสบดี','วันศุกร์','วันเสาร์','วันอาทิตย์'] %}
                                                            {% for day in days %}
                                                            <option>{{day}}</option>
                                                            {% endfor %}
                                                            {% endwith %}
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>เวลาเริ่มเรียน:</label>
                                                        <select class="form-control" id="sel2" name="startime">
                                                            {% for num in range(0,24) %}
                                                            <option>{{num}}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>เวลาเลิกเรียน:</label>
                                                        <select class="form-control" id="sel2" name="endtime">
                                                            {% for num in range(0,24) %}
                                                            <option>{{num}}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <button class="btn btn-outline-warning btn-lg"
                                                            type="submit">เพิ่ม</button>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-outline-danger"
                                                    data-dismiss="modal">ปิด</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="modaleditsj{{data['sj_id']}}" class="modal fade" role="dialog" align="start">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content">
                                            <div class="modal-header"
                                                style="background-color: rgba(0, 0, 64, 1);color:rgba(253, 184, 19, 1)"
                                                ;>
                                                <h4 class="modal-title">แบบฟอร์มจัดการรายวิชา</h4>
                                                <button type="button" class="close"
                                                    data-dismiss="modal">&times;</button>
                                            </div>
                                            <div class="modal-body">
                                                <form action="/updatesjdata" method="POST">
                                                    <div class="form-group">
                                                        <label for="sel1">คณะ:</label>
                                                        <select class="form-control" id="sel1" name="faculty">
                                                            <option>{{data['fac_name']}}</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>รหัสวิชา:</label>
                                                        <input type="hidden" class="form-control" name="oldsj_id"
                                                            value="{{data['sj_id']}}" style="text-transform:uppercase">
                                                        <input type="text" class="form-control" name="sj_id"
                                                            value="{{data['sj_id']}}" maxlength="6"
                                                            style="text-transform:uppercase" require>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>ชื่อวิชา:</label>
                                                        <input type="text" class="form-control" name="sj_name"
                                                            value="{{getsjdetail['sj_name']}}" require>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="sel2">วันที่:</label>
                                                        <select class="form-control" id="sel2" name="day">
                                                            {% with datedic = {'Mon':'วันจันทร์','Tue':'วันอังคาร','Wed':'วันพุธ','Thu':'วันพฤหัสบดี','Fri':'วันศุกร์','Sat':'วันเสาร์','Sun':'วันอาทิตย์'}  %}
                                                            {% for k,v in datedic.items()  %}
                                                            {% if getsjdetail['sj_date'] == k %}
                                                            <option selected hidden>{{v}}</option>
                                                            {% else %}
                                                            <option>{{v}}</option>
                                                            {% endif %}
                                                            {% endfor %}
                                                            {% endwith %}
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>เวลาเริ่มเรียน:</label>
                                                        <select class="form-control" id="sel2" name="startime">
                                                            {% set splistarttime = getsjdetail['sj_StartTime'].split('.')  %}
                                                            {% for num in range(0,24) %}
                                                            {% if splistarttime[0] == num|string %}
                                                            <option selected hidden>{{num}}</option>
                                                            {% else %}
                                                            <option>{{num}}</option>
                                                            {% endif %}
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>เวลาเลิกเรียน:</label>
                                                        <select class="form-control" id="sel2" name="endtime">
                                                            {% set splifinishtime = getsjdetail['sj_FinishTime'].split('.')  %}
                                                            {% for num in range(0,24) %}
                                                            {% if splifinishtime[0] == num|string %}
                                                            <option selected hidden>{{num}}</option>
                                                            {% else %}
                                                            <option>{{num}}</option>
                                                            {% endif %}
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <button class="btn btn-outline-warning btn-lg"
                                                            type="submit">แก้ไข</button>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <form action="/deletesj" method="POST">
                                                    <input type="hidden" class="form-control" name="sj_id"
                                                        value="{{data['sj_id']}}">
                                                    <button type="submit" class="btn btn-outline-danger btn-xs"
                                                        onclick="return confirm('คุณต้องการลบวิชานี้หรือไม่?')">ลบวิชาเรียน</button>
                                                </form>
                                                <button type="button" class="btn btn-outline-danger"
                                                    data-dismiss="modal">ปิด</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endwith %}
                                {% endfor %}
                                {% endwith %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer">

            </div>
        </div>
    </div>
</body>
<script>
    let clock = document.getElementById("clock");
    setInterval(() => {
        fetch("{{ url_for('time_feed') }}")
            .then(response => {
                response.text().then(t => {
                    clock.innerHTML = t
                })
            });
    }, 1000);
    $(document).ready(function () {
        $('[data-toggle="tooltip1"]').tooltip();
    });

    window.setTimeout(function () {
        $(".alert").fadeTo(500, 0).slideUp(500, function () {
            $(this).remove();
        });
    }, 2000);

    toggleChevron = function (a) {
        $(a).find('i').toggleClass('fas fa-caret-down fas fa-caret-up');
    }

    $(".custom-file-input").on("change", function () {
        let fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
</script>


</html>